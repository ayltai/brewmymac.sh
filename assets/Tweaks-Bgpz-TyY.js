import{af as q,ag as F,q as a,r as t,S as C,t as T,C as S,T as m}from"./vendor-BmfRSFhQ.js";import{u as L}from"./i18next-BjIGZPcw.js";import{M as O,T as B,S as G,G as W,a as z}from"./Terminal-uo12SWsR.js";import{u as H,k as P,T as K,S as Q,e as Z,F as X,l as Y,M as J,h as $,f as ee,m as ae,n as se,L as ie,o as te,p as ne,g as re,i as oe,q as de,s as ce,t as le}from"./index-BPLE0iEq.js";import{S as pe}from"./terminal-BaFK-3nW.js";import"./firebase-DemMd8W9.js";import"./redux-CGdXS3La.js";import"./react-router-2BEppQmR.js";import"./sentry-CoI5brYB.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},f=new Error().stack;f&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[f]="235c186c-e716-4509-99fd-816832a83015",o._sentryDebugIdIdentifier="sentry-dbid-235c186c-e716-4509-99fd-816832a83015")}catch{}})();var j={},ue=F;Object.defineProperty(j,"__esModule",{value:!0});var _=j.default=void 0,fe=ue(q()),he=a;_=j.default=(0,fe.default)((0,he.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const Ee=()=>{const[o,f]=t.useState(""),[d,g]=t.useState(),[p,y]=t.useState(),{tweaks:w}=H(e=>e.spellbook),{data:c,error:h}=P(void 0,{pollingInterval:K}),x=t.useRef(new O({fields:["id","name","description"],storeFields:["id","name","description","imageUrl","infoUrl","author","parameters","types","values","impact","privileged","sipInvolved"],searchOptions:{fuzzy:Q}})),E=Z(),r=t.useContext(X),[A,R]=t.useTransition(),{t:l}=L(),I=t.useCallback(e=>(r&&Y(r,{query:e}),x.current.search(e).map(s=>({id:s.id,name:s.name,description:s.description,imageUrl:s.imageUrl,infoUrl:s.infoUrl,author:s.author,parameters:s.parameters,types:s.types,values:s.values,impact:s.impact,privileged:s.privileged,sipInvolved:s.sipInvolved}))),[r]),k=e=>f(e??""),b=({tweak:e})=>{const s=t.useRef({...e}),v=w.some(i=>i.id===e.id),M=i=>{r&&(i?re(r,{itemId:e.id}):oe(r,{itemId:e.id})),E(i?de(e):ce(e))},D=(i,n)=>{if(n){const u=e.parameters.indexOf(i);s.current.values=s.current.values.map((U,V)=>V===u?n:U)}},N=()=>{const i={...s.current};if(p){const n=[...p];n[n.findIndex(u=>u.id===i.id)]=i,y(n)}if(d){const n=[...d];n[n.findIndex(u=>u.id===i.id)]=i,g(n)}w.some(n=>n.id===i.id)&&E(le(i))};return t.useEffect(()=>{s.current={...e}},[e]),a.jsx(z,{selected:v,color:"secondary",title:e.name,subtitle:e.author,description:e.description,action:a.jsx(te,{color:"secondary",onClick:N,children:l("action.save")}),actionText:v?l("action.configure"):void 0,actionIcon:v?a.jsx(_,{}):void 0,onChange:M,children:a.jsx(ne,{description:e.description,infoUrl:e.infoUrl,parameters:e.parameters,types:e.types,values:e.values,onChange:D})},e.id)};return t.useEffect(()=>{x.current.removeAll(),c&&x.current.addAll(c),o.length<J?g(void 0):R(()=>g(I(o)))},[c,o,I]),t.useEffect(()=>{c&&y(c)},[c]),t.useEffect(()=>{h&&$(h)},[h]),t.useEffect(()=>{r&&ee(r,{pageName:"Tweaks",route:"/tweaks"})},[r]),a.jsxs(a.Fragment,{children:[a.jsxs(C,{paddingBottom:16,spacing:2,alignItems:"center",children:[a.jsxs(T,{sx:{animation:"gradient 16s ease infinite",background:"linear-gradient(315deg, #e5aac3 3%, #e8f5c8 38%, #07a3b2 68%, #6cc6cb 98%)",backgroundSize:"400%",backgroundAttachment:"fixed",overflow:"hidden"},width:"100%",padding:8,position:"relative",textAlign:"center",children:[a.jsx("div",{className:"wave"}),a.jsx("div",{className:"wave"}),a.jsx("div",{className:"wave"}),a.jsxs(S,{maxWidth:"lg",children:[a.jsx(m,{paddingX:8,paddingBottom:8,textAlign:"center",variant:"h2",children:l("tweaks.tagline")}),a.jsx(pe,{loading:A,hint:l("tweaks.search.hint"),onSearch:k})]})]}),!d&&a.jsx(S,{maxWidth:"lg",children:a.jsxs(C,{paddingTop:8,display:"flex",direction:"row",children:[a.jsxs(T,{flexGrow:1,children:[a.jsx(m,{gutterBottom:!0,paddingTop:2,color:"secondary",variant:"h4",children:l("tweaks.about.title")}),a.jsx(m,{variant:"subtitle1",children:l("tweaks.about.description")})]}),a.jsx(T,{marginRight:-4,children:a.jsx(B,{commands:ae})})]})}),a.jsxs(S,{maxWidth:"lg",children:[!d&&p&&se.map(e=>a.jsx(G,{sx:{paddingY:4},paddingTop:4,color:"secondary",title:e,children:p.filter(s=>s.category===e).map(s=>a.jsx(b,{tweak:s},s.id))},e)),d&&a.jsx(W,{sx:{paddingTop:4},children:(d??p??[]).map(e=>a.jsx(b,{tweak:e},e.id))})]})]}),a.jsx(ie,{show:!c||!!h,children:a.jsx(m,{color:e=>e.palette.getContrastText(e.palette.text.primary),children:l("tweaks.loading")})})]})};export{Ee as Tweaks};
//# sourceMappingURL=Tweaks-Bgpz-TyY.js.map
